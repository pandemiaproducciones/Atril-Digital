<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sinf√≥nica App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none; }
        .active-tab { border-bottom: 4px solid #1e40af; color: #1e40af; }
    </style>
</head>
<body class="bg-gray-100 min-h-screen font-sans">

    <div id="screen-pin" class="flex items-center justify-center min-h-screen p-4">
        <div class="bg-white p-8 rounded-3xl shadow-xl w-full max-w-sm text-center border-t-8 border-blue-900">
            <h1 id="display-band-name" class="text-2xl font-black text-gray-800 mb-6 uppercase">Banda Sinf√≥nica</h1>
            <input type="password" id="pin-input" placeholder="PIN" class="w-full p-4 border rounded-2xl mb-4 text-center text-2xl tracking-widest">
            <button onclick="checkPin()" class="w-full bg-blue-900 text-white p-4 rounded-2xl font-bold shadow-lg">ENTRAR</button>
        </div>
    </div>

    <div id="screen-menu" class="hidden p-6 max-w-md mx-auto space-y-4">
        <h2 class="text-xl font-bold text-blue-900 mb-4">Panel del Director</h2>
        
        <button onclick="goToProcessSelection()" class="w-full bg-white p-6 rounded-2xl shadow-sm border-l-4 border-green-500 flex items-center justify-between">
            <div class="text-left">
                <p class="font-bold text-lg text-gray-800">Tomar Asistencia</p>
                <p class="text-sm text-gray-500">Ensayos o Presentaciones</p>
            </div>
            <span class="text-2xl">üìù</span>
        </button>

        <button onclick="alert('Pr√≥ximamente: Lista de eventos realizados')" class="w-full bg-white p-6 rounded-2xl shadow-sm border-l-4 border-blue-500 flex items-center justify-between">
            <div class="text-left">
                <p class="font-bold text-lg text-gray-800">Historial de Eventos</p>
                <p class="text-sm text-gray-500">Ver conciertos pasados</p>
            </div>
            <span class="text-2xl">üé∫</span>
        </button>

        <button onclick="showConfig()" class="w-full bg-white p-6 rounded-2xl shadow-sm border-l-4 border-gray-400 flex items-center justify-between">
            <div class="text-left">
                <p class="font-bold text-lg text-gray-800">Configuraci√≥n</p>
                <p class="text-sm text-gray-500">Nombre de banda y Drive</p>
            </div>
            <span class="text-2xl">‚öôÔ∏è</span>
        </button>
    </div>

    <div id="screen-config" class="hidden p-6 max-w-md mx-auto">
        <button onclick="showMenu()" class="mb-4 text-blue-600 font-bold">‚Üê Volver</button>
        <div class="bg-white p-6 rounded-2xl shadow-lg">
            <label class="block font-bold mb-2">Nombre de la Banda:</label>
            <input type="text" id="cfg-band-name" class="w-full p-3 border rounded-xl mb-4">
            <button onclick="saveConfig()" class="w-full bg-blue-900 text-white p-3 rounded-xl font-bold">Guardar Cambios</button>
        </div>
    </div>

    <div id="screen-activity" class="hidden p-6 max-w-md mx-auto space-y-6">
        <button onclick="showMenu()" class="text-blue-600 font-bold">‚Üê Volver</button>
        <h2 class="text-2xl font-bold text-gray-800">¬øQu√© actividad es hoy?</h2>
        
        <div class="flex gap-4">
            <button onclick="setActivity('Ensayo')" class="flex-1 bg-white p-6 rounded-2xl shadow-md border-2 border-transparent focus:border-blue-500">
                <span class="text-3xl block">üéº</span>
                <span class="font-bold">ENSAYO</span>
            </button>
            <button onclick="toggleEventInput()" class="flex-1 bg-white p-6 rounded-2xl shadow-md border-2 border-transparent focus:border-blue-500">
                <span class="text-3xl block">üèüÔ∏è</span>
                <span class="font-bold">EVENTO</span>
            </button>
        </div>

        <div id="event-description-div" class="hidden bg-blue-50 p-4 rounded-xl">
            <label class="block text-sm font-bold text-blue-900 mb-2">Descripci√≥n del Evento:</label>
            <input type="text" id="event-desc" placeholder="Ej: Retreta Parque Principal" class="w-full p-3 rounded-lg border-blue-200 border">
        </div>

        <button onclick="showProcessSelection()" class="w-full bg-blue-900 text-white p-4 rounded-2xl font-bold shadow-lg">SIGUIENTE</button>
    </div>

    <script>
        let config = JSON.parse(localStorage.getItem('band_cfg')) || { name: "Banda Sinf√≥nica", pin: "paisa" };
        let currentActivity = "";

        window.onload = () => {
            document.getElementById('display-band-name').innerText = config.name;
            document.getElementById('cfg-band-name').value = config.name;
        };

        function checkPin() {
            if(document.getElementById('pin-input').value === config.pin) showMenu();
            else alert("PIN incorrecto");
        }

        function showMenu() { hideAll(); document.getElementById('screen-menu').classList.remove('hidden'); }
        function showConfig() { hideAll(); document.getElementById('screen-config').classList.remove('hidden'); }
        function goToProcessSelection() { hideAll(); document.getElementById('screen-activity').classList.remove('hidden'); }
        
        function toggleEventInput() {
            currentActivity = "Evento";
            document.getElementById('event-description-div').classList.remove('hidden');
        }

        function setActivity(type) {
            currentActivity = type;
            document.getElementById('event-description-div').classList.add('hidden');
            document.getElementById('event-desc').value = type;
        }

        function saveConfig() {
            config.name = document.getElementById('cfg-band-name').value;
            localStorage.setItem('band_cfg', JSON.stringify(config));
            location.reload();
        }

        function hideAll() {
            ['screen-pin', 'screen-menu', 'screen-config', 'screen-activity'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
        }

        function showProcessSelection() {
            const desc = document.getElementById('event-desc').value;
            if(!desc) { alert("Por favor escribe una descripci√≥n"); return; }
            alert("Iniciando asistencia para: " + desc);
            // Aqu√≠ seguir√≠a el flujo a Prebanda/Infantil/Titular
        }
    </script>
</body>
</html>
